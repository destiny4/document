
::: tip 时间
2018.7-2018.10
:::

<img src="https://user-gold-cdn.xitu.io/2019/11/7/16e43e1815968987?w=325&h=571&f=gif&s=1608241" alt="MFtxtx.gif" border="0" />

## 简介

&emsp;&emsp;为何会做时间尺这个小程序，是因为有一次想记录一些事情，然后设置提醒，结果发现手机上没有那种很方便直观的软件，就干脆自己搞一个界面美观的微信小程序。

&emsp;&emsp;时间尺里面的控件全是使用的官方提供的，然后画图使用的是canvas，包括时间尺和任务框。

## 说明

&emsp;&emsp;时间尺一共两个界面，一个就是详情页面，一个是新增、修改页面。

&emsp;&emsp;详情页面顶部是个人信息和计划完成度，以及可以切换的日期合成控件。

&emsp;&emsp;详情页面顶部以下属于时间尺部分；以最中间的那个大尺子分隔，尺子左边的是指定日期的指定时间段的计划任务；尺子右边的是指定日期的指定时间段的已完成任务。

&emsp;&emsp;时间尺的每个刻度是按照24小时制平均分的，具体每个小时分多长，以及每个小时内的分钟间隔可以在代码里面统一设置。

&emsp;&emsp;时间尺左边的计划气泡和右边的完成气泡都是canvas画出来的，并且支持点击气泡，修改信息。长按气泡，删除信息。

## 源码地址

::: tip 地址
 [https://github.com/destiny4/Time-Rule.git](https://github.com/destiny4/Time-Rule.git) 
:::

## 总结
&emsp;&emsp;在做时间尺这个小程序过程中，遇到的最大的麻烦就是原生组件的层级无限大，微信官方组件无法覆盖原生组件。一开始其实只有一个页面的，就是新增修改页面也在一个页面，以弹窗的形势展示，但是由于原生组件canvas的层级很高，导致新增修改的弹窗无法使用遮罩层覆盖canvas，造成页面层级混乱，因此我只能新打开一个页面去新增，修改。当然还有小麻烦，就是时间尺旁边的气泡箭头如何用canvas画出来，如何实现点击气泡就确定是哪一个气泡被点击等等。

&emsp;&emsp;结尾，时间尺小程序让我结合官方文档打开了微信小程序的大门，同时又熟悉了一遍canvas画图技巧。